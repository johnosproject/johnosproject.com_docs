"use strict";(self.webpackChunkjosp_docs=self.webpackChunkjosp_docs||[]).push([[7736],{3905:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>k});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var p=a.createContext({}),s=function(e){var t=a.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},d=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,p=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=s(r),c=n,k=u["".concat(p,".").concat(c)]||u[c]||m[c]||o;return r?a.createElement(k,l(l({ref:t},d),{},{components:r})):a.createElement(k,l({ref:t},d))}));function k(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,l=new Array(o);l[0]=c;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[u]="string"==typeof e?e:n,l[1]=i;for(var s=2;s<o;s++)l[s]=r[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,r)}c.displayName="MDXCreateElement"},91539:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>s});var a=r(87462),n=(r(67294),r(3905));const o={title:"Placeholders"},l="JOD Workers Placeholders",i={unversionedId:"jod/specs/workers/workers_placeholders",id:"jod/specs/workers/workers_placeholders",title:"Placeholders",description:"With Worker Configs Placeholder, Makers can setup dynamic configs for their Pillar's firmware.",source:"@site/3_references/1_josp/1_jod/4_specs/6_workers/1_workers_placeholders.mdx",sourceDirName:"1_jod/4_specs/6_workers",slug:"/jod/specs/workers/workers_placeholders",permalink:"/references/josp/jod/specs/workers/workers_placeholders",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Placeholders"},sidebar:"referencesSidebar",previous:{title:"JOD Workers",permalink:"/references/josp/jod/specs/workers/"},next:{title:"Custom",permalink:"/references/josp/jod/specs/workers/custom_workers"}},p={},s=[{value:"Pillar",id:"pillar",level:2},{value:"State",id:"state",level:2},{value:"Action",id:"action",level:2}],d={toc:s},u="wrapper";function m(e){let{components:t,...r}=e;return(0,n.kt)(u,(0,a.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"jod-workers-placeholders"},"JOD Workers Placeholders"),(0,n.kt)("p",null,"With Worker Configs Placeholder, ",(0,n.kt)("strong",{parentName:"p"},"Makers can setup dynamic configs for their ",(0,n.kt)("a",{parentName:"strong",href:"../pillars"},"Pillar's")," firmware"),"."),(0,n.kt)("p",null,"For example, using the worker's placeholders, you can setup a File Listener worker that use the Pillar's name (",(0,n.kt)("inlineCode",{parentName:"p"},"%C_NAME%"),") in the monitored file path.\nOr even you can configure a HTTP Puller to use the pillar's path (",(0,n.kt)("inlineCode",{parentName:"p"},"%C_PATH"),")."),(0,n.kt)("p",null,"Worker ",(0,n.kt)("strong",{parentName:"p"},"Placeholders are substituted to Firmware Configs on worker initialization"),".\nWhen worker parses the Firmware Configs String, from the pillar's definition in the ",(0,n.kt)("a",{parentName:"p",href:"../structure"},"JOD Agent's structure"),".\nThis string is defined by Maker in the object's configuration.",(0,n.kt)("br",null),"\nFirmware Configs are parsed using the ",(0,n.kt)("a",{parentName:"p",href:"https://bitbucket.org/johnosproject_shared/com.robypomper.josp/src/641d05e37c6aa0224dff2ff222fb99c16882a515/src/jospJOD/java/com/robypomper/josp/jod/executor/AbsJODWorker.java#lines-182"},"AbsJODWorker::parseConfig{TYPE}(Map,String)")," methods.\nThose methods substitute string config's value placeholders with ",(0,n.kt)("a",{parentName:"p",href:"#pillar"},"Pillar")," properties, then convert resulting value to required ",(0,n.kt)("inlineCode",{parentName:"p"},"{TYPE}"),". ",(0,n.kt)("br",null),"\nSo any Firmware Configs is updated with Component properties."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Placeholders can are replaced also when the worker must done his work")," (listen, pull a state or execute an action).",(0,n.kt)("br",null),"\nDepending on worker implementation, it can update some Firmware Config with ",(0,n.kt)("a",{parentName:"p",href:"#state"},"State")," or  ",(0,n.kt)("a",{parentName:"p",href:"#action"},"Action")," (only on action execution) properties. ",(0,n.kt)("br",null),"\nCheck the worker's documentation for placeholder replacement info."),(0,n.kt)("h2",{id:"pillar"},"Pillar"),(0,n.kt)("p",null,"This placeholder are replaced with properties from the Pillar that use current Worker."),(0,n.kt)("p",null,"Those placeholders are always replaced in almost all Firmware Configs on worker initialization."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Placeholder"),(0,n.kt)("th",{parentName:"tr",align:null},"Replaced with"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%C_NAME%")),(0,n.kt)("td",{parentName:"tr",align:null},"Pillar name")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%C_TYPE%")),(0,n.kt)("td",{parentName:"tr",align:null},"Pillar type ('BooleanState', 'RangeAction'...)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%C_PATH%")),(0,n.kt)("td",{parentName:"tr",align:null},"Pillar full path")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%PARENT_NAME%")),(0,n.kt)("td",{parentName:"tr",align:null},"Pillar's parent name, 'N/A' for root component.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%PARENT_PATH%")),(0,n.kt)("td",{parentName:"tr",align:null},"Pillar's parent full path, 'N/A' for root component.")))),(0,n.kt)("h2",{id:"state"},"State"),(0,n.kt)("p",null,"States Placeholders allow to use Pillar's value in puller and executors workers."),(0,n.kt)("p",null,"A puller can use current value to query the updated one.\nOr an executor should now current value before update the new one."),(0,n.kt)("p",null,"Those placeholders are replaced only in certainly Firmware Configs during worker job execution (pulling or execute).",(0,n.kt)("br",null),"\nCheck the worker's Firmware Configs details for placeholder replacement info."),(0,n.kt)("p",null,"Only for ",(0,n.kt)("strong",{parentName:"p"},"Pillar of Boolean")," type:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Placeholder"),(0,n.kt)("th",{parentName:"tr",align:null},"Replaced with"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL%")),(0,n.kt)("td",{parentName:"tr",align:null},"Pillar value that correspond to 'True' or 'False' strings.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_BOOL%")),(0,n.kt)("td",{parentName:"tr",align:null},"Pillar value that correspond to 'True' or 'False' strings.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_BIN%")),(0,n.kt)("td",{parentName:"tr",align:null},"Pillar value that correspond to '1' (true) or '0' (false).")))),(0,n.kt)("p",null,"Only for ",(0,n.kt)("strong",{parentName:"p"},"Pillar of Range")," type:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Placeholder"),(0,n.kt)("th",{parentName:"tr",align:null},"Replaced with"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL%")),(0,n.kt)("td",{parentName:"tr",align:null},"Pillar value that correspond to a valid number rendered with the ",(0,n.kt)("a",{parentName:"td",href:"https://bitbucket.org/johnosproject_shared/com.robypomper.josp/src/2.2.1/src/jospCommons/java/com/robypomper/java/JavaFormatter.java#lines-85"},"JavaFormatter.doubleToStr(double)")," function.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_COMMA%")),(0,n.kt)("td",{parentName:"tr",align:null},"Pillar value that correspond to a valid number rendered with the ",(0,n.kt)("a",{parentName:"td",href:"https://bitbucket.org/johnosproject_shared/com.robypomper.josp/src/2.2.1/src/jospCommons/java/com/robypomper/java/JavaFormatter.java#lines-95"},"JavaFormatter.doubleToStr_Point(double)")," function.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_POINT%")),(0,n.kt)("td",{parentName:"tr",align:null},"Pillar value that correspond to a valid number rendered with the ",(0,n.kt)("a",{parentName:"td",href:"https://bitbucket.org/johnosproject_shared/com.robypomper.josp/src/2.2.1/src/jospCommons/java/com/robypomper/java/JavaFormatter.java#lines-105"},"JavaFormatter.doubleToStr_Comma(double)")," function.")))),(0,n.kt)("h2",{id:"action"},"Action"),(0,n.kt)("p",null,"Action Placeholders allow to use Action Request params in executors workers."),(0,n.kt)("p",null,"Action Request params include info such as the (new) value to set and the (old) current Pillar's state.\nMoreover you can find other info about Action Request like the JOSP Service's id that send the request and the User's id that was using the service."),(0,n.kt)("p",null,"Those placeholders are replaced only in certainly Firmware Configs during executor job execution (execute).",(0,n.kt)("br",null),"\nCheck the worker's Firmware Configs details for placeholder replacement info."),(0,n.kt)("p",null,"For ",(0,n.kt)("strong",{parentName:"p"},"all Actions Requests"),":"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Placeholder"),(0,n.kt)("th",{parentName:"tr",align:null},"Replaced with"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%SRV_ID%")),(0,n.kt)("td",{parentName:"tr",align:null},"JOSP Service's id that required the action execution.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%USR_ID%")),(0,n.kt)("td",{parentName:"tr",align:null},"JOSP User's id that required the action execution.")))),(0,n.kt)("p",null,"Only for ",(0,n.kt)("strong",{parentName:"p"},"Actions Requests on Pillar of Boolean Action")," type:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Placeholder"),(0,n.kt)("th",{parentName:"tr",align:null},"Replaced with"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL%")),(0,n.kt)("td",{parentName:"tr",align:null},"Value to set, requested by Action Execution. This value can be one of the two 'true' or 'false' strings.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_BOOL%")),(0,n.kt)("td",{parentName:"tr",align:null},"Value to set, requested by Action Execution. This value can be one of the two 'True' or 'False' strings.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_BIN%")),(0,n.kt)("td",{parentName:"tr",align:null},"Value to set, requested by Action Execution. This value can be one of the two '1' (true) or '0' (false) strings.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_OLD%")),(0,n.kt)("td",{parentName:"tr",align:null},"Current pillar value, before Action Execution. This value can be one of the two 'true' or 'false' strings.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_OLD_BOOL%")),(0,n.kt)("td",{parentName:"tr",align:null},"Current pillar value, before Action Execution. This value can be one of the two 'True' or 'False' strings.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_OLD_BIN%")),(0,n.kt)("td",{parentName:"tr",align:null},"Current pillar value, before Action Execution. This value can be one of the two '1' (true) or '0' (false) strings.")))),(0,n.kt)("p",null,"For ",(0,n.kt)("strong",{parentName:"p"},"Actions Requests on Pillar of Range Action")," type:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Placeholder"),(0,n.kt)("th",{parentName:"tr",align:null},"Replaced with"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL%")),(0,n.kt)("td",{parentName:"tr",align:null},"Value to set, requested by Action Execution. This value can be a valid number rendered with the ",(0,n.kt)("a",{parentName:"td",href:"https://bitbucket.org/johnosproject_shared/com.robypomper.josp/src/2.2.1/src/jospCommons/java/com/robypomper/java/JavaFormatter.java#lines-85"},"JavaFormatter.doubleToStr(double)")," function.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_POINT%")),(0,n.kt)("td",{parentName:"tr",align:null},"Value to set, requested by Action Execution. This value can be a valid number rendered with the ",(0,n.kt)("a",{parentName:"td",href:"https://bitbucket.org/johnosproject_shared/com.robypomper.josp/src/2.2.1/src/jospCommons/java/com/robypomper/java/JavaFormatter.java#lines-85"},"JavaFormatter.doubleToStr(double)")," function.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_COMMA%")),(0,n.kt)("td",{parentName:"tr",align:null},"Value to set, requested by Action Execution. This value can be a valid number rendered with the ",(0,n.kt)("a",{parentName:"td",href:"https://bitbucket.org/johnosproject_shared/com.robypomper.josp/src/2.2.1/src/jospCommons/java/com/robypomper/java/JavaFormatter.java#lines-85"},"JavaFormatter.doubleToStr(double)")," function.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_INT%")),(0,n.kt)("td",{parentName:"tr",align:null},"Value to set, requested by Action Execution. This value can be a valid number rendered with the ",(0,n.kt)("a",{parentName:"td",href:"https://bitbucket.org/johnosproject_shared/com.robypomper.josp/src/2.2.1/src/jospCommons/java/com/robypomper/java/JavaFormatter.java#lines-118"},"JavaFormatter.doubleToStr_Truncated(double)")," function.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_OLD%")),(0,n.kt)("td",{parentName:"tr",align:null},"Current pillar value, before Action Execution. This value can be a valid number rendered with the ",(0,n.kt)("a",{parentName:"td",href:"https://bitbucket.org/johnosproject_shared/com.robypomper.josp/src/2.2.1/src/jospCommons/java/com/robypomper/java/JavaFormatter.java#lines-85"},"JavaFormatter.doubleToStr(double)")," function.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_OLD_POINT%")),(0,n.kt)("td",{parentName:"tr",align:null},"Current pillar value, before Action Execution. This value can be a valid number rendered with the ",(0,n.kt)("a",{parentName:"td",href:"https://bitbucket.org/johnosproject_shared/com.robypomper.josp/src/2.2.1/src/jospCommons/java/com/robypomper/java/JavaFormatter.java#lines-85"},"JavaFormatter.doubleToStr(double)")," function.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_OLD_COMMA%")),(0,n.kt)("td",{parentName:"tr",align:null},"Current pillar value, before  Action Execution. This value can be a valid number rendered with the ",(0,n.kt)("a",{parentName:"td",href:"https://bitbucket.org/johnosproject_shared/com.robypomper.josp/src/2.2.1/src/jospCommons/java/com/robypomper/java/JavaFormatter.java#lines-85"},"JavaFormatter.doubleToStr(double)")," function.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"%VAL_OLD_INT%")),(0,n.kt)("td",{parentName:"tr",align:null},"Current pillar value, before Action Execution. This value can be a valid number rendered with the ",(0,n.kt)("a",{parentName:"td",href:"https://bitbucket.org/johnosproject_shared/com.robypomper.josp/src/2.2.1/src/jospCommons/java/com/robypomper/java/JavaFormatter.java#lines-118"},"JavaFormatter.doubleToStr_Truncated(double)")," function.")))))}m.isMDXComponent=!0}}]);