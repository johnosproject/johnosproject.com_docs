"use strict";(self.webpackChunkjosp_docs=self.webpackChunkjosp_docs||[]).push([[4529],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),u=r,g=d["".concat(l,".").concat(u)]||d[u]||m[u]||a;return n?o.createElement(g,i(i({ref:t},c),{},{components:n})):o.createElement(g,i({ref:t},c))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:r,i[1]=s;for(var p=2;p<a;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},85877:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>p});var o=n(87462),r=(n(67294),n(3905));const a={title:"Usage"},i="JOD Agent Usage",s={unversionedId:"jod/usage",id:"jod/usage",title:"Usage",description:"The JOD Agent is provided as Java application, so to run it you must run it as a `java` command.",source:"@site/3_references/1_josp/1_jod/2_usage.mdx",sourceDirName:"1_jod",slug:"/jod/usage",permalink:"/references/josp/jod/usage",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Usage"},sidebar:"referencesSidebar",previous:{title:"Requirements",permalink:"/references/josp/jod/requirements"},next:{title:"Communication",permalink:"/references/josp/jod/comm"}},l={},p=[{value:"Daemon",id:"daemon",level:2},{value:"Command",id:"command",level:2}],c={toc:p},d="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"jod-agent-usage"},"JOD Agent Usage"),(0,r.kt)("p",null,"The JOD Agent is provided as Java application, so to run it you must run it as a ",(0,r.kt)("inlineCode",{parentName:"p"},"java")," command."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The JOD Agent is not designed to be run directly."),(0,r.kt)("p",{parentName:"admonition"},"It's designed to be run as part of the JOD Distribution (See the ",(0,r.kt)("a",{parentName:"p",href:"/docs/references/tools/jod_dist_template/"},"JOD Distribution TEMPLATE"),"), so use ",(0,r.kt)("a",{parentName:"p",href:"/docs/references/tools/jod_dist_template/how_to_use_a_jod_distribution/run_a_jod_distribution"},"JOD Dist Cmds to run corresponding JOD Agent"),".")),(0,r.kt)("p",null,"Fastest way ",(0,r.kt)("strong",{parentName:"p"},"to get a JOD Agent working dir is to download latest JOD Agent Dir")," from ",(0,r.kt)("a",{parentName:"p",href:"https://bitbucket.org/johnosproject_shared/com.robypomper.josp/downloads/"},"com.robypomper.josp > Downloads @ Bitbucket")," repository.",(0,r.kt)("br",null),"\nDir compressed dir contains all JOD Agent dependencies and default config files."),(0,r.kt)("p",null,"Another way, is to prepare your JOD Agent Dir manually.\nIt require to download JAR files from the Maven Repository and edit your configs files.",(0,r.kt)("br",null),"\nYou can download following two files ",(0,r.kt)("a",{parentName:"p",href:"https://repo1.maven.org/maven2/com/robypomper/josp/jospJOD/2.2.1/jospJOD-2.2.1.jar"},"jospJOD-2.2.1.jar")," and ",(0,r.kt)("a",{parentName:"p",href:"https://repo1.maven.org/maven2/com/robypomper/josp/jospJOD/2.2.1/jospJOD-2.2.1-deps.jar"},"jospJOD-2.2.1-deps.jar")," in an empty directory.\nThen extract the content of ",(0,r.kt)("inlineCode",{parentName:"p"},"jospJOD-2.2.1-deps.jar")," file in the ",(0,r.kt)("inlineCode",{parentName:"p"},"/libs")," sub-dir, it's a zipped file so you can use your favourite tool to extract it.",(0,r.kt)("br",null),"\nNow you must create JOD Agent's configs files like the ",(0,r.kt)("inlineCode",{parentName:"p"},"configs/jod.yml")," for generic ",(0,r.kt)("a",{parentName:"p",href:"specs/configs"},"JOD Agent Configs")," and the ",(0,r.kt)("inlineCode",{parentName:"p"},"configs/struct.jod")," file ",(0,r.kt)("a",{parentName:"p",href:"specs/structure"},"object's structure"),".\n",(0,r.kt)("a",{parentName:"p",href:"specs/files"},"Other files")," like the ",(0,r.kt)("inlineCode",{parentName:"p"},"log4j2.xml")," for logging configuration are optionals."),(0,r.kt)("p",null,"Once your prepared your JOD Agent's dir, ",(0,r.kt)("strong",{parentName:"p"},"open a terminal session and cd to prepared dir"),"."),(0,r.kt)("p",null,"Now you can decide to run the JOD Agent as a ",(0,r.kt)("a",{parentName:"p",href:"#daemon"},"background process")," or as a ",(0,r.kt)("a",{parentName:"p",href:"#command"},"foreground command"),"."),(0,r.kt)("h2",{id:"daemon"},"Daemon"),(0,r.kt)("p",null,"The JOD Agent is designed to be run as a background process. Mostly started from the operating system's init system.\nYou can run it manually with following command, or you can include the same command in the init system's scripts files:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ cd {JOD_AGENT_DIR}\n$ java -cp jospJOD-2.2.1.jar com.robypomper.josp.jod.JODDaemon >logs/console.log 2>&1 &\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"This command return immediately, but it continue running in background."),(0,r.kt)("br",null),"\nBy default, all logs are printed on the ",(0,r.kt)("inlineCode",{parentName:"p"},"logs/jospJOD.log")," file (in the Java command we use the ",(0,r.kt)("inlineCode",{parentName:"p"},">logs/console.log 2>&1")," redirect to avoid printing console logs on current console).",(0,r.kt)("br",null),"\nYou can alter this behaviour adding a custom ",(0,r.kt)("inlineCode",{parentName:"p"},"log4j2.xml")," file and include it in the java command with the param ",(0,r.kt)("inlineCode",{parentName:"p"},"-Dlog4j.configurationFile=log4j2.xml"),"."),(0,r.kt)("p",null,"Logs can be read with following command (remove the ",(0,r.kt)("inlineCode",{parentName:"p"},"-f")," param to quit after prints last log):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ tail -f logs/jospJOD.log\n  < (Ctrl+C to exit)\n")),(0,r.kt)("h2",{id:"command"},"Command"),(0,r.kt)("p",null,"When executed ",(0,r.kt)("strong",{parentName:"p"},"as a foreground command, the JOD Agent, after his startup, show the ",(0,r.kt)("a",{parentName:"strong",href:"specs/shell"},"JOD Shell")),"."),(0,r.kt)("p",null,"You can use shell's command to interact with current JOD Agent and test your configs.",(0,r.kt)("br",null),"\nType ",(0,r.kt)("inlineCode",{parentName:"p"},"exit")," to the JOD Shell to shutdown the JOD Agent and exit from the shell."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ java -cp jospJOD-2.2.1.jar com.robypomper.josp.jod.JODShell\n")),(0,r.kt)("p",null,"By default all logs are displayed on console (on the JOD Shell's prompt) and on the ",(0,r.kt)("inlineCode",{parentName:"p"},"logs/jospJOD.log")," file.",(0,r.kt)("br",null),"\nYou can alter this behaviour adding a custom ",(0,r.kt)("inlineCode",{parentName:"p"},"log4j2.xml")," file and include it in the java command with the param ",(0,r.kt)("inlineCode",{parentName:"p"},"-Dlog4j.configurationFile=log4j2.xml"),"."))}m.isMDXComponent=!0}}]);